var restaurant_menu = {
	"Info":{
		"name":"Banaleaf",
		"location":"Milpitas",
		"phone":"4084317445",
		"logo" : "http://www.bananaleaf-usa.com/assets/images/BLogo.gif",
		"bkcolor" : "#FCC"
		},
	"Menu":{
		"Small Plates & Appertizers":{
			"Gado-Gado":{ "price":"$7.95", "description":"assorted vegetables, fried prawn's cake & tofu with peanut sauce"},
			"Chicken $7.95,Beef or Combo Satay ":{ "price":"$8.95", "description":"with cucumber & onion dipped in peanut sauce "},
			"Green Papaya Salad ":{ "price":"$7.95", "description":"with shrimps, vegetables, almond & kesom leaves"},
			"Lobak ":{ "price":"$8.95", "description":"chicken egg roll, fried tofu, fried prawn cake with Hoisin sauce & chili "},
			"Yu Sang ":{ "price":"$14.95", "description":"tuna sashimi with mango, papaya, leeks, taro, ginger, sesame, peanut & etc"},
			"Fresh Spring Rolls ":{ "price":"$6.95", "description":"with shrimp, vermicelli, bean sprouts, basil & Chef's peanut sauce"},
			"Sambal Anchovy ":{ "price":"$5.95", "description":"with onion & cucumber "},
			"Roti Prata":{ "price":"$2.95", "description":"multi-layered home made Indian bread dipped in curry sauce"},
			"Roti Telur ":{ "price":"$4.95", "description":"multi-layered home made Indian bread with egg dipped in curry sauce"},
			"Roti Murtabak":{ "price":"$7.95", "description":"multi-layered home made Indian bread with beef, egg & onion dipped in curry sauce"},
			"Tofu Salad ":{ "price":"$7.95", "description":"fried tofu triangles full of crunchy vegetables with peanut sauce"},
			"Penang Poh Piah ":{ "price":"$6.95", "description":"steamed spring rolls stuffed with dried shrimps & vegetables"}
		},
			
		"Soup":{
			"Tom Yaml Soup":{ "price":{"Small":"$8.50","Large":"$11.50"}, "description":"hot & sour soup with seafood, mushrooms, lime juice & lemon grass"},
			"Galangal & Kaffir Lime Soup":{ "price":{"Small":"$8.50","Large":"$11.50"}, "description":"with seafood or chicken in coconut milk"}
		},
		"Poultry":{
			"Mango Chicken ":{ "price":"$12.95", "description":"with green & red peppers in a spicy mango sauce served in a mango shell"},
			"Istimewa Chicken ":{ "price":"$10.50", "description":"with chef's fresh seasoning & dried shrimp paste sauce"},
			"Kapitan Chicken ":{ "price":"$9.95", "description":"in fresh curry leaf & lemon gress flavor with eggplant, tomato & potato"},
			"Utama Basil Chicken ":{ "price":"$9.95", "description":"with snap peas & red onion in Chief's basil sauce"},
			"Singaporean Black Pepper Chicken":{ "tag":"New!","price":"$10.95", "description":"with eggplant & string beans"},
			"Rendang Chicken ":{ "price":"$9.95", "description":"with chef's special Malay curry sauce"},
			"Green or Red Curry Chicken ":{ "price":"$9.95", "description":"with freshly selected vegetables "},
			"Tai Pou Chicken":{ "price":"$8.50", "description":"chef's special deep fried chicken with Tai Pou spicy sauce"},
			"Malay Sizzling Chicken":{ "price":"$9.95", "description":"with black pepper sauce, anaheim chili, red bell pepper & sweet onion"},
			"Penang Sizzling Chicken":{ "price":"$10.95", "description":"with onion, green & red bell pepper with chef's special shrimp paste sauce"}
		},
		"Beef & Lamb (Grass Fed Beef & Lamb)":{
			"Rendang Beef ":{ "price":"$11.50", "description":"with chef's special Malay curry sauce"},
			"Green or Red Curry Beef ":{ "price":"$11.95", "description":"with freshly selected vegetables"},
			"Utama Basil Beef":{ "price":{ "Beef":"$11.95","Lamb": "$14.95"}, "description":"with chef's special ginger flower sauce  "},
			"Istimewa Beef ":{ "price":"$11.95", "description":"with chef's fresh seasoning & dried shrimp paste sauce "},
			"Malay Sizzling Beef":{ "price":{"Beef":"$13.95","Lamb":"$14.95"}, "description":"with black pepper sauce, anaheim chili, red bell pepper & sweet onion"},
			"Penang Curry Lamb or Green Curry Lamb ":{ "price":"$14.95", "description":"simmered in Penang curry sauce with freshly selected vegetables"},
			"Cumin Lamb ":{ "price":"$14.95", "description":"with lemongrass, Thai chili & cilantro"},
			"Singaporean Black Pepper Beef":{ "tag":"New!","price":{"Beef":"$12.95","Lamb":"$14.95"}, "description":"with eggplant & string beans"}
		},
		"Seafood":{
			"Mango Prawns":{ "price":"$13.95", "description":"with green & red peppers in a spicy mango sauce served in a mango shell "},
			"Penang Sizzling Prawns":{ "price":{"Prawns":"$2.95","Jumbo Scallops":"$19.95"}, "description":"with onion, green & red pepper with chef's special sauce"},
			"Malay Sizzling Black Pepper Prawns":{ "price":"$12.95"},
			"Malay Sizzling Black Pepper Jumbo Scallops":{ "price":"$19.95"},
			"Oatmeal Battered Jumbo Prawns":{ "price":"$20.95"},
			"Asam Prawns":{ "price":{"Prawns":"$12.95","Jumbo Prawns":"$19.95"}, "description":"with hot and sour tamarind sauce  "},
			"Siam Prawns":{ "price":{"Prawns":"$12.95","Jumbo Prawns":"$19.95"}, "description":"with chef's special ginger flower sauce  "},
			"Singaporean Chili Prawns":{ "price":{"Prawns":"$12.95","Jumbo Prawns":"$19.95"}, "description":"with chef's chili garlic tomato sauce and egg  "},
			"Utama Basil Prawns ":{ "price":"$12.95", "description":"with snap peas & red onion in Chef's basil sauce"},
			"Rempah Squid ":{ "price":"$9.95", "description":"with dried chili sauce"},
			"Rempah Prawns":{ "price":"$12.95", "description":"with dried chili sauce"},
			"Melaka Prawns ":{ "price":"$12.95", "description":"with chef's lemon grass sauce"},
			"Singaporean Black Pepper Prawns":{ "tag":"New!","price":{"Prawns":"$12.95","Jumbo Prawns":"$19.95"}, "description":"with eggplant & string beans"},
			"Red Curry Prawns ":{ "price":"$12.95", "description":"with freshly selected vegetables"},
			"Indian Red Curry Fish Head":{ "price":"$13.95", "description":"with freshly selected vegetables in clay pot"},
			"Asam Fish Head":{ "price":"$13.95", "description":"with hot & sour tamarind sauce"},
			"Indian Red Curry Salmon    $15.95":{ "price":{"Salmon":"$15.95","Seabass":"$27.95"}, "description":"with freshly selected vegetables in clay pot"},
			"Banana Leaf wrapped Grilled Seabass ":{ "price":"$27.95", "description":"with finely chopped herbs, spices, & sambal chilli"},
			"Melaka White Pomfret":{ "price":{"Ponfret":"$15.95","Salmon":"$15.95","Seabass":"$27.95"}, "description":"with chef's lemon grass sauce  "},
			"Siam White Pomfret":{ "price":{"Ponfret":"$15.95","Salmon":"$15.95","Seabass":"$27.95"}, "description":"with chef's special ginger flower sauce & fresh mango  "},
			"Asam White Pomfret":{ "price":{"Ponfret":"$15.95","Salmon":"$15.95","Seabass":"$27.95"}, "Description":"with hot and sour tamarind sauce "},
			"Sarang Seafood ":{ "price":"$16.95", "description":"assorted seafood with vegetables, mushrooms & cashew nuts in a formed fried taro nest"},
			"Dungeness Crab..... ":{ "price":{"each":"$30.95"}},
			"Singaporean Chili Crab ":{ "price":{"each":"$30.95"}, "description":"with chef's chili garlic tomato sauce and egg"},
			"Singaporean Black Pepper Crab ":{ "price":{"each":"$30.95"}, "description":"with chef's spicy black pepper sauce"},
			"Sambal Malaysian Crab ":{ "price":{"each":"$30.95"}, "description":"with chef's fresh seasoning dried spicy sauce"}
		},
		"Vegetables":{
			"Belachan Eggplant or String Beans":{ "price":"$8.95", "description":"with Malay special shrimp paste sauce "},
			"Belachan KangKung (Ong Choy),Okra or Asparagus":{ "price":"$9.95", "description":"with Malay special shrimp paste sauce"},
			"Utama Basil Snap Peas":{ "price":"$9.95", "description":"with shiitake mushroom, tofu & red onion in Chef's basil sauce"},
			"Melaka Eggplant or String Beans ":{ "price":"$8.50", "description":"with chef's lemon grass sauce"},
			"Melaka Asparagus or Okra ":{ "price":"$8.95", "description":"with chef's lemon grass sauce "},
			"Asam Eggplant or String Beans ":{ "price":"$8.50", "description":"with hot and sour tamarind sauce "},
			"Asam Asparagus or Okra ":{ "price":"$8.95", "description":"with hot and sour tamarind sauce "},
			"Sauteed Eggplant or String Beans ":{ "price":"$7.95", "description":"with garlic "},
			"Sauteed Asparagus or KangKung (Ong Choy) ":{ "price":"$9.50", "description":"with garlic "},
			"Red or Green Curry Vegetables with Tofu":{ "price":{"Tofu":"$8.95","Kangkung & Calamari ":"$10.95"}, "description":"with chef's special sesame and peanut sauce  "},
			"Cumin Tofu":{ "price":"$8.95", "description":"with string beans, lemongrass, Thai chili & cilantro"},
			"Singaporean Black Pepper Eggplant & String Beans":{ "price":"$8.95"}
		},
		"Noodles":{
			"Penang Asam Laksa":{ "price":"$8.95", "description":"hot & sour lai-fun noodles in lemon grass fish broth with fish, onion & pineapple"},
			"Chicken Curry Laksa Mee":{ "price":"$8.95", "description":"red curry noodles soup with Chef's lemon grass and curry broth with chicken & vegetables"},
			"Seafood Curry Laksa Mee":{ "price":"$9.50", "description":"red curry noodles soup with Chef's lemon grass and curry broth with seafood & vegetables"},
			"Prawn Mee Soup":{ "price":"$8.95", "description":"shrimp noodles soup with chef's special shrimp borth, chicken, egg, kang kung & bean sprouts"},
			"Pahd Thai":{ "price":"$9.50", "description":"pan-fried rice noodles with prawns, squids, chicken, eggs, tofu, grounded peanuts & bean sprouts"},
			"Chow Kueh Teow ":{ "price":"$9.50", "description":"Hokkeinese stir-fried rice noodles with prawns, squids, eggs & bean sprouts"},
			"Ying Yong Noodles ":{ "price":"$9.50", "description":"flat rice noodles, vermicelli with prawns, squids, chicken & vegetables in thick egg sauce"},
			"Indian Mee Goreng ":{ "price":"$9.50", "description":"Indian spicy fried noodles with prawns, squids, chicken, tofu, eggs, grounded peanuts & bean sprouts"},
			"Huat Dan Ho or Huat Dan Bee Hoon":{ "price":"$9.50", "description":"flat rice noodles or vermicelli with prawns, squids, chicken, eggs & vegetables in thick egg sauce"},
			"e Noodles ":{ "price":"$9.50", "description":"with prawns, squids, chicken & vegetables with thick egg sauce in clay pot or crispy-fried  "},
			"Hokkein Char Mee":{ "tag":"New!","price":"$9.50", "description":"thick wheat noodles served in traditional caramel soy sauce with prawns"}
		},
		"Rice":{
			"Banana Leaf Rice":{ "price":"$7.95", "add":{"Rendang Beef":"$1"}, "description":"Malay special coconut rice served with rendang chicken, broiled egg, sambal anchovy, onion, cucumber & peanuts on a banana leaf"},
			"Hainan Chicken with Rice ":{ "price":"$8.95", "description":"steam chicken served with chef's special soy sauce & Hainan seasoned rice (chicken is served cold with bones & skin, boneless is available upon request)"},
			"Pineapple Fried Rice ":{ "price":"$9.95", "description":"with pineapple bits, cashews, shrimps, chicken & peas stuffed in a pineapple"},
			"Indian Nasi Goreng ":{ "price":"$9.50", "description":"Indian spicy fried rice with prawns, squids, chicken, tofu & eggs "},
			"Basil Fried Rice":{ "price":"$9.50", "description":"with prawns, squids, chicken, tofu, cilantro & Thai chili"},
			"Malay Coconut Milk Rice ":{ "price":"$2.00"},
			"Hainan Seasoned Rice  with turmeric":{ "price":"$2.00"},
			"Brown Rice ":{ "price":"$2.00"},
			"Steam Rice":{ "price":"$1.50"}
		},
		"Side Products":{
			"Curry Sauce":{ "price":{"Small":"$2","Large":"$6"}},
			"Satay Sauce":{ "price":{"Small":"$4","Large":"$10"}},
			"Sambal Belachan":{ "price":{"Small":"$5","Large":"$15"}},
			"Chef's Hat (adjustable size)":{ "price":"$25.00"}
		}
	}
};

var global = {
};

function displayErrorMsg(error_msg) {
	$('#Error').html("<p>"+error_msg+"</p>");
	$('#Error').addClass('error');
}

function display_form_data(data) {
	data.replace(/'&'/g,'\n');
	alert(data);
}

function clearError(error_msg) {
	$('#Error').html("");
}

// Given a JSON representation of the restaurant,
// This function builds the whole menu and navigation

function displayLeaf(leaf) {
	//alert("Leaf "+leaf);
	var items = "<ul>";
	//var obj = restaurant_menu;
	//var chosenMenu = obj.Menu[leaf];
	Object.keys(leaf).forEach(function(key) {
		var mid = key;
		//alert(key);
		items += '<li>'+key+'</li>';
	});
	items += "</ul>";
	$('#menu').html(items);
	
}

function buildMenuNavigator(category) {
	//var obj = $.parseJSON(vr);
	//alert(category);
	var obj = restaurant_menu;
	if ( category == 'root' ) {
		displayFrontPage(obj);
	}
	else {
		$("#page_id").attr("data-role",category);
		displayLeaf(obj.Menu[category]);
	}
}

function displayFrontPage(obj) {
	//Show logo
	$('#logo').html("<img src=\""+obj.Info.logo+"\" alt=\"Restaurant Logo\" >");
	
	//Color Background
	$.css('background-color',obj.Info.bkcolor);
	
	// Set Restaurant name
	$('title').text(obj.Info.name);
	
	// Create the Categories menu
	var menuobj = '<ul data-role="listview" data-theme="b">';
	Object.keys(obj.Menu).forEach(function(key) {
		//var mid = obj.Menu[key].id;
		var mid = key;
		//menuobj += '<li id=\"'+mid+'\" onClick="buildMenuNavigator(\''+mid+'\');"><button data-role=\"none\" data-icon=\"arrow-r\" data-iconpos=\"right\">'+key+'</button></li>';
		//menuobj += '<a href="#page1" data-role="button" data-transition="slide" onClick="buildMenuNavigator(\''+mid+'\');">'+mid+'</a>';
		menuobj += '<li><a href="#page1"  onClick="buildMenuNavigator(\''+mid+'\');" data-role="button">'+mid+'</a></li>';
	});
	menuobj += "</ul>";
	$('#menu').replaceWith(menuobj);
	
}

$(document).ready(function() {
	buildMenuNavigator($("#page_id").attr("data-role")); 
});